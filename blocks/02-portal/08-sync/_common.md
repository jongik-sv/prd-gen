---
category: sync
label: 상태 동기화 전략
summary: 포털의 여러 창/탭/디바이스 간에 인증 상태, 이벤트, 데이터 변경을 동기화하는 범위와 방식을 결정한다.
context:
  - 다중 탭/Pop-out 환경에서 인증 토큰 갱신, 사용자 설정 변경 등이 모든 창에 즉시 반영되어야 한다
  - 한 창에서 데이터를 수정하면 같은 데이터를 표시 중인 다른 창도 갱신되어야 한다 (데이터 일관성)
  - 같은 브라우저 내 동기화와 다른 기기 간 동기화는 기술적으로 다른 접근이 필요하다
dependencies:
  - 04-layout
  - 07-notification
---

## 배경

포털 환경에서 상태 동기화가 필요한 주요 시나리오:

| 시나리오 | 예시 | 동기화 대상 |
|---------|------|-----------|
| **인증 상태** | 한 탭에서 로그아웃하면 모든 탭도 로그아웃 | 같은 브라우저 내 |
| **토큰 갱신** | 액세스 토큰 갱신 시 모든 탭에 전파 | 같은 브라우저 내 |
| **데이터 변경** | 한 탭에서 주문을 수정하면 다른 탭의 주문 목록 갱신 | 같은 브라우저 내 + 다른 기기 |
| **실시간 데이터** | 설비 모니터링 수치가 변경되면 모든 화면 갱신 | 모든 기기 |
| **알림 전파** | P0 알림이 발생하면 모든 창에 표시 | 같은 브라우저 내 + 다른 기기 |
| **테마/설정 변경** | 다크 모드 전환 시 모든 탭에 반영 | 같은 브라우저 내 |

### 동기화 계층

| 계층 | 범위 | 기술 |
|------|------|------|
| 로컬 이벤트 | 같은 탭/창 내 | EventEmitter, CustomEvent |
| 크로스 윈도우 | 같은 브라우저의 다른 탭/창 | BroadcastChannel API |
| 크로스 세션 | 다른 브라우저, 다른 기기 | WebSocket (서버 경유) |

### 선택지 요약

| 선택지 | 동기화 범위 | 구현 복잡도 |
|--------|-----------|-----------|
| BroadcastChannel만 | 같은 브라우저 내 | 낮음 |
| BroadcastChannel + WebSocket | 같은 브라우저 내 + 다른 기기 | 높음 |
