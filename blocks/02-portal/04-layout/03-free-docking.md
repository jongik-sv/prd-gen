---
id: layout-free-docking
category: layout
label: 자유 도킹 (Docking Layout)
summary: 패널을 자유롭게 분할, 병합, 도킹할 수 있는 IDE/트레이딩 터미널급 레이아웃을 제공한다.
pros:
  - 무제한 패널 분할로 사용자가 최적의 화면 배치를 완전히 자유롭게 구성 가능
  - 가장자리 도킹, 플로팅 패널, 고정(pinned) 패널 등 고급 레이아웃 패턴 지원
  - 트레이딩 터미널, 관제 시스템, IDE 등 극한의 다중 화면이 필요한 시나리오에 적합
  - 기존 C/S MDI 환경의 모든 기능을 웹에서 완벽하게 재현 가능
cons:
  - 구현 복잡도가 매우 높아 전문 레이아웃 라이브러리(golden-layout, FlexLayout 등) 의존 필요
  - 사용자 학습 곡선이 높아 일반 사용자에게는 과도할 수 있음
  - 반응형 대응이 극히 어려움 (태블릿/모바일에서는 사실상 사용 불가)
  - 무제한 패널로 인한 메모리 관리 난이도가 매우 높음
  - 레이아웃 직렬화/복원의 엣지 케이스가 많아 버그 가능성 증가
bestFor:
  - 금융 트레이딩 터미널, 관제 센터, SCADA 등 전문 운영 시스템
  - IDE급 개발 도구나 디자인 도구
  - 사용자가 고정된 대형 모니터(27인치+)에서 작업하는 환경
---

## 개요

자유 도킹 레이아웃은 사용자가 패널을 제한 없이 분할하고, 가장자리에 도킹하고, 플로팅 창으로 분리하고, 원하는 위치에 병합할 수 있는 최고 수준의 유연성을 제공하는 방식이다. VS Code, IntelliJ, Bloomberg Terminal 등에서 볼 수 있는 레이아웃 시스템이다.

TDI + Split View가 "최대 4분할"이라는 합리적 제약을 두는 것과 달리, 자유 도킹은 분할 깊이에 제한이 없으며, 패널을 창 외부로 분리(tear-off)하거나 다시 합칠 수도 있다.

## 레이아웃 요소

### 패널 유형

| 유형 | 설명 | 예시 |
|------|------|------|
| **도킹 패널(Docked)** | 메인 레이아웃에 고정된 패널 | 좌측 사이드바, 하단 콘솔 |
| **탭 패널(Tabbed)** | 여러 탭을 포함하는 패널 | 중앙 편집 영역 |
| **플로팅 패널(Floating)** | 레이아웃 위에 떠있는 독립 패널 | 속성 인스펙터, 팔레트 |
| **고정 패널(Pinned)** | 접혀있다가 호버 시 펼쳐지는 패널 | 자주 참조하는 도구 |

### 도킹 동작

| 동작 | 설명 |
|------|------|
| **분할 도킹** | 패널을 기존 패널의 좌/우/상/하로 분할하여 배치 |
| **탭 도킹** | 패널을 기존 패널의 탭 바에 놓아 탭으로 합류 |
| **가장자리 도킹** | 패널을 화면 최외곽에 놓아 전체 높이/너비 사이드 패널로 배치 |
| **플로팅** | 패널을 빈 공간에 놓아 떠다니는 패널로 전환 |
| **Tear-off** | 패널을 브라우저 창 밖으로 드래그하여 별도 창으로 분리 |

## 구현 접근

### 기존 라이브러리 활용

자유 도킹 레이아웃을 처음부터 구현하는 것은 비현실적이므로, 검증된 라이브러리를 기반으로 한다:

| 라이브러리 | 프레임워크 | 특징 | 유지보수 상태 |
|-----------|----------|------|-------------|
| **FlexLayout** | React | 유연한 도킹, 탭, 플로팅 | 활발 |
| **golden-layout** | Vanilla JS | 고전적인 도킹 레이아웃 | 유지보수 모드 |
| **rc-dock** | React | 도킹 + 탭 + 드래그 | 활발 |
| **자체 구현** | Any | 완전한 제어 | 막대한 투자 필요 |

### 레이아웃 직렬화

자유 도킹에서도 레이아웃은 트리 구조로 직렬화되지만, TDI + Split View 대비 노드 타입이 더 다양하다:

- **행(Row)**: 수평으로 자식을 나열
- **열(Column)**: 수직으로 자식을 나열
- **탭셋(TabSet)**: 탭으로 구성된 패널 그룹
- **플로팅(Floating)**: 위치와 크기가 절대값으로 지정된 패널
- **고정(Pinned)**: 접힌 상태의 패널

## 메모리 관리

패널 수 제한이 없으므로 가장 적극적인 메모리 관리가 필요하다:

| 전략 | 설명 |
|------|------|
| 활성 패널 수 제한 | 동시에 렌더링되는 패널 수를 메모리 기반으로 동적 제한 |
| 비가시 패널 가상화 | 화면에 보이지 않는 패널은 unmount하고 스크롤 시 재마운트 |
| 플로팅 패널 자동 정리 | 일정 시간 사용하지 않은 플로팅 패널 자동 닫기 제안 |
| 메모리 모니터링 | 힙 사용량 실시간 감시, 임계값 초과 시 경고 및 자동 정리 |

## 단계적 도입

자유 도킹은 Phase 1에서 전체를 구현하기보다, 단계적으로 도입하는 것이 권장된다:

| 단계 | 기능 | 전제 조건 |
|------|------|----------|
| **Phase 1** | TDI + Split View (2×2) | 기본 탭 시스템 완성 |
| **Phase 2a** | 분할 깊이 제한 해제 | Phase 1 안정화 |
| **Phase 2b** | 가장자리 도킹, 고정 패널 | Phase 2a 안정화 |
| **Phase 3** | 플로팅 패널, Tear-off | Phase 2b 안정화 |

## 제약 사항 및 고려사항

1. **구현 비용**: 수개월의 전담 개발 또는 상용 라이브러리 라이선스 비용이 필요
2. **UX 복잡성**: 일반 사용자에게는 과도한 자유도가 오히려 혼란을 줄 수 있음 → 프리셋으로 완화
3. **반응형 포기**: 사실상 데스크톱 전용이며, 태블릿/모바일에서는 단순 탭으로 폴백 필요
4. **테스트 난이도**: 무한한 레이아웃 조합에 대한 테스트가 어려움
5. **접근성**: 복잡한 드래그 앤 드롭 인터랙션은 키보드·스크린 리더 접근성 확보가 매우 어려움
6. **성능**: 패널 수가 많아지면 DOM 노드 수가 급증하여 렌더링 성능 저하 가능
