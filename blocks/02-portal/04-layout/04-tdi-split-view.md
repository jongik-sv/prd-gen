---
id: layout-tdi-split-view
category: layout
label: 탭 + 분할 뷰
summary: 탭 기반 레이아웃에 좌우/상하 분할 뷰를 추가하여 최대 2×2(4패널)까지 동시에 화면을 표시한다.
pros:
  - 마스터-디테일 패턴을 자연스럽게 지원 (목록 + 상세 동시 표시)
  - 최대 4개 화면을 동시에 볼 수 있어 MES/ERP 운영 환경에 적합
  - 구현 복잡도가 자유 도킹 대비 훨씬 낮으면서도 실질적인 동시 작업 지원
  - 탭 드래그로 패널 간 이동, 분할선 드래그로 크기 조절 등 직관적 UX
cons:
  - 순수 탭 대비 구현·유지보수 복잡도 증가 (레이아웃 트리, 분할선, 드래그 등)
  - 각 패널에 독립 Remote App이 마운트되므로 메모리 사용량 증가
  - 반응형 대응이 복잡해짐 (뷰포트 크기에 따라 분할 가능 수가 달라짐)
  - 패널 간 연동(PanelLink) 설계가 추가로 필요
bestFor:
  - MES, ERP, WMS, SCM 등 산업용 시스템의 운영 포털
  - 마스터-디테일 패턴이 빈번한 데이터 집약적 시스템
  - 기존 C/S MDI 환경을 웹으로 마이그레이션하는 프로젝트
---

## 개요

탭 + 분할 뷰 전략은 순수 탭(TDI) 위에 화면 분할 기능을 추가하여, 하나의 브라우저 탭 안에서 최대 4개의 패널을 동시에 표시하는 방식이다. 각 패널은 독립된 Remote App(또는 같은 앱의 다른 경로)을 담을 수 있으며, 패널 간 연동(PanelLink)으로 마스터-디테일 패턴을 지원한다.

이 방식은 **산업 현장의 실질적인 동시 작업 니즈**를 충족하면서도, 자유 도킹의 극단적 복잡도를 피하는 실용적 균형점이다.

## 레이아웃 구조

### 2분할 (좌-우)

```
┌─────┬───────────────┬───────────────┐
│     │  Panel 1      │  Panel 2      │
│  S  │  [생산주문 ●]  │  [주문상세]    │
│  i  │               │               │
│  d  │  (마스터)      │  (디테일)      │
│  e  │               │               │
│  b  │               │               │
│  a  │               │               │
│  r  │               │               │
└─────┴───────────────┴───────────────┘
```

### 3분할 (좌 + 우상/우하)

```
┌─────┬───────────┬───────────┐
│     │           │  Panel 2  │
│  S  │  Panel 1  │  (상세)   │
│  i  │  (목록)   ├───────────┤
│  d  │           │  Panel 3  │
│  e  │           │  (품질)   │
│  b  │           │           │
│  a  │           │           │
│  r  │           │           │
└─────┴───────────┴───────────┘
```

### 4분할 (2×2)

```
┌─────┬───────────┬───────────┐
│     │  Panel 1  │  Panel 2  │
│  S  │           │           │
│  i  ├───────────┼───────────┤
│  d  │  Panel 3  │  Panel 4  │
│  e  │           │           │
│  b  │           │           │
│  a  │           │           │
│  r  │           │           │
└─────┴───────────┴───────────┘
```

## 분할 조작 방법

### 분할 생성

| 방법 | 동작 |
|------|------|
| 탭 우클릭 메뉴 | "오른쪽에서 열기", "아래에서 열기" 선택 |
| 탭 드래그 | 화면 가장자리 스냅 영역에 놓기 (VS Code 스타일 가이드) |
| 키보드 단축키 | Ctrl+\\ (좌우 분할), Ctrl+Shift+\\ (상하 분할) |

### 드래그 스냅 가이드

탭을 드래그할 때 화면에 나타나는 스냅 영역:

```
┌──────────────────────────┐
│         [상단]            │
│   ┌──┬──────────┬──┐    │
│   │좌│  [중앙]   │우│    │
│   └──┴──────────┴──┘    │
│         [하단]            │
└──────────────────────────┘
```

- 좌/우 영역에 놓으면 좌우 분할
- 상/하 영역에 놓으면 상하 분할
- 중앙에 놓으면 해당 패널의 탭으로 추가

### 분할 조절

| 조작 | 동작 |
|------|------|
| 분할선 드래그 | 패널 크기 비율 조절 |
| 분할선 더블클릭 | 50:50으로 리셋 |
| 최소 패널 크기 | 300px 이하로 줄이면 자동 닫힘 |

### 분할 해제

- 패널의 마지막 탭을 닫으면 해당 패널 자동 제거
- 패널의 모든 탭을 다른 패널로 드래그하면 제거

## 패널 연동 (PanelLink)

마스터-디테일 패턴을 지원하기 위한 패널 간 연동 메커니즘이다. 소스 패널에서 발생한 이벤트(예: 주문 선택)를 타겟 패널의 액션(예: 상세 화면으로 이동)으로 매핑한다.

### 연동 방식

- **소스 패널**: 특정 이벤트를 발생시킴 (예: "order:selected", 페이로드: 주문 ID)
- **Shell 이벤트 라우터**: 이벤트를 수신하여 연결된 타겟 패널에 전달
- **타겟 패널**: 수신한 페이로드로 화면 전환 또는 데이터 갱신

### 연동 예시

| 시나리오 | 소스 이벤트 | 타겟 액션 |
|---------|-----------|----------|
| 주문 목록 → 주문 상세 | order:selected (주문 ID) | /order-detail/{id}로 이동 |
| 설비 목록 → 설비 모니터링 | equipment:selected (설비 ID) | 해당 설비 실시간 데이터 표시 |
| 품질 검사 → 불량 이력 | defect:selected (LOT 번호) | 해당 LOT의 불량 이력 조회 |

패널 연동 설정은 워크스페이스에 저장되어, 사용자가 커스터마이징한 마스터-디테일 구성을 복원할 수 있다.

## 레이아웃 직렬화

레이아웃은 재귀적 트리 구조로 직렬화된다. 각 노드는 "리프(leaf)"이거나 "분할(split)"이며:

- **리프 노드**: 패널 ID, 소속 탭 목록, 활성 탭 인덱스를 포함
- **분할 노드**: 분할 방향(수평/수직), 비율(0.0~1.0), 좌/우(또는 상/하) 자식 노드를 포함

이 트리 구조를 JSON으로 직렬화하면 워크스페이스에 저장할 수 있고, 역직렬화하면 레이아웃을 복원할 수 있다.

## 확장 경로

TDI + Split View는 Phase 1으로 구현하되, 아키텍처 수준에서 자유 도킹(Phase 2)으로 확장 가능하게 설계한다. 레이아웃 트리 구조가 이미 재귀적이므로, 분할 깊이 제한만 완화하면 자유 도킹으로 자연스럽게 전환할 수 있다.

## 제약 사항 및 고려사항

1. **메모리 증가**: 4패널이면 4개의 Remote App이 동시에 마운트되어 메모리 사용량이 4배 가까이 증가
2. **최소 패널 크기**: 300px 제약으로 인해 모바일/소형 태블릿에서는 분할 불가
3. **패널별 권한 검증**: 각 패널의 Remote App마다 독립적으로 권한을 확인해야 함
4. **드래그 UX 구현**: 탭 드래그, 스냅 가이드, 분할선 조절 등 인터랙션 구현 비용이 상당함
