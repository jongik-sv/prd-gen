---
id: noti-p0-p3-full
category: notification
label: 전체 4단계 알림 (P0-P3)
summary: P0(Critical)부터 P3(Low)까지 4단계 우선순위 모델을 완전하게 구현하여, 긴급 알림은 즉시 인지·확인되도록 보장한다.
pros:
  - 설비 비상 정지, 안전 사고 등 긴급 상황에 대한 즉각적 알림 가능
  - P0 알림은 무시할 수 없으며 확인(Acknowledge) 이력이 기록되어 규정 준수
  - 다중 창/다중 디바이스에서 동시에 알림을 전달하여 놓침 방지
  - 사운드, 진동, 풀스크린 오버레이 등 다중 감각 채널 활용
cons:
  - WebSocket 인프라 필수 (실시간 양방향 통신)
  - 풀스크린 오버레이, 사운드 재생, BroadcastChannel 연동 등 구현 복잡도 높음
  - P0 알림의 Acknowledge 이력 관리를 위한 서버 측 로직 필요
  - 알림 오남용 시 "알림 피로(Notification Fatigue)" 발생 가능
bestFor:
  - MES, SCADA 등 설비 안전·품질 관리가 중요한 산업 현장
  - 규정상 긴급 알림의 확인(Acknowledge) 이력이 필요한 환경
  - 24시간 교대 근무 환경에서 실시간 상황 전파가 필수인 경우
---

## 개요

전체 4단계 알림 체계는 P0(Critical)부터 P3(Low)까지 심각도에 따라 차등화된 알림 경험을 제공한다. 특히 P0과 P1은 사용자의 즉각적 인지를 보장하기 위해 풀스크린 오버레이, 사운드, 진동, 크로스윈도우 전파 등 적극적인 푸시(Push) 방식을 사용한다.

이 체계의 핵심 원칙은 **"알림의 심각도에 비례하는 방해 수준(Proportional Interruption)"**이다. 경미한 알림은 조용히 쌓이고, 긴급한 알림만 강하게 방해한다.

## 등급별 상세 동작

### P0 - Critical (최긴급)

| 항목 | 동작 |
|------|------|
| 시각적 | 모든 열린 창/탭에 **풀스크린 오버레이** 표시 (반투명 배경 + 알림 카드) |
| 오디오 | 경보음 재생 (반복, 확인 전까지 멈추지 않음) |
| 진동 | 모바일/태블릿에서 진동 패턴 |
| 확인 요구 | 사용자가 "확인(Acknowledge)" 버튼을 클릭해야만 오버레이 닫힘 |
| 이력 기록 | 누가, 언제 확인했는지 서버에 기록 (감사 추적) |
| 크로스윈도우 | BroadcastChannel로 같은 브라우저의 모든 탭/창에 동시 표시 |
| 에스컬레이션 | N분 내 미확인 시 상급자에게 에스컬레이션 |
| 예시 | 설비 비상 정지, 화재 감지, 유해 가스 누출 |

### P1 - High (긴급)

| 항목 | 동작 |
|------|------|
| 시각적 | 현재 포커스 창에 **토스트 알림** (자동 닫히지 않음, 수동 닫기) + 배지 |
| 오디오 | 알림음 1회 재생 |
| 진동 | 짧은 진동 1회 |
| 알림 센터 | 최상단에 강조 표시 |
| 크로스윈도우 | 비활성 탭의 제목에 "[!]" 접두사 추가 (깜빡임 효과) |
| 예시 | 품질 이탈 (SPC 한계 초과), 자재 부족 긴급, 생산 라인 정지 |

### P2 - Normal (일반)

| 항목 | 동작 |
|------|------|
| 시각적 | 헤더 알림 아이콘 배지 + 알림 센터에 추가 |
| 토스트 | 우상단 토스트 (3~5초 후 자동 사라짐) |
| 오디오 | 없음 (사용자 설정으로 활성화 가능) |
| 예시 | 작업 완료, 승인 요청, 검사 결과 도착 |

### P3 - Low (참고)

| 항목 | 동작 |
|------|------|
| 시각적 | 알림 센터에만 추가 |
| 토스트 | 없음 |
| 오디오 | 없음 |
| 예시 | 공지사항, 시스템 업데이트 예정, 교육 안내 |

## P0 알림의 Acknowledge 프로세스

P0 알림은 단순 표시가 아니라, 사용자의 확인 행위를 추적하는 프로세스를 포함한다:

```
P0 알림 발생
    │
    ├── 모든 창에 풀스크린 오버레이 표시 + 경보음
    │
    ├── 사용자가 "확인" 클릭
    │   ├── 확인 시각, 확인자 정보를 서버에 기록
    │   ├── 오버레이 닫힘, 경보음 중지
    │   └── 알림 센터에 "확인됨" 상태로 이동
    │
    └── N분 내 미확인
        ├── 에스컬레이션: 상급자에게 동일 P0 알림 전송
        └── 반복 경보음 패턴 변경 (더 긴급한 톤)
```

### Acknowledge 기록 정보

| 필드 | 설명 |
|------|------|
| 알림 ID | 원본 알림 식별자 |
| 확인자 | 확인한 사용자 ID, 이름 |
| 확인 시각 | UTC 타임스탬프 |
| 응답 시간 | 알림 발생 ~ 확인까지 소요 시간 |
| 확인 방법 | 포털 클릭, 모바일 푸시 확인 등 |

## 알림 전달 인프라

| 계층 | 기술 | 역할 |
|------|------|------|
| 서버 → 포털 | WebSocket | 실시간 알림 전달 (P0~P2) |
| 서버 → 모바일 | FCM/APNs | 브라우저 닫혀있을 때 푸시 알림 |
| 포털 내 창 간 | BroadcastChannel API | 같은 브라우저의 다른 탭/창에 전파 |
| 다른 기기/브라우저 | WebSocket | 서버 경유 크로스 디바이스 전달 |

## 알림 설정 (사용자별)

사용자가 알림 피로를 관리할 수 있도록 개인 설정을 제공한다:

| 설정 항목 | 설명 | P0 적용 여부 |
|----------|------|------------|
| 유형별 수신 ON/OFF | 특정 유형의 알림 수신 거부 | P0은 OFF 불가 (강제 수신) |
| 토스트 표시 여부 | P2 알림의 토스트 표시 여부 | P0/P1은 강제 표시 |
| 사운드 ON/OFF | 알림 사운드 재생 여부 | P0은 OFF 불가 |
| 방해 금지 시간 | 특정 시간대에 P2-P3 알림 억제 | P0/P1은 시간대 무관 |

## 제약 사항 및 고려사항

1. **WebSocket 인프라**: 실시간 알림을 위한 WebSocket 서버, 연결 관리, 재연결 로직 구현 필요
2. **브라우저 제한**: 사운드 자동 재생이 브라우저 정책으로 차단될 수 있음 (사용자 인터랙션 후에만 가능)
3. **알림 피로**: P0/P1이 너무 자주 발생하면 사용자가 무감각해짐 → 임계값과 디바운싱 설계 필요
4. **오프라인 대응**: 브라우저를 닫은 상태에서도 P0 알림이 전달되려면 모바일 푸시 또는 별도 경보 시스템 필요
5. **Acknowledge 감사**: P0 확인 이력은 규정 감사 대상이 될 수 있으므로 변조 방지 설계 필요
